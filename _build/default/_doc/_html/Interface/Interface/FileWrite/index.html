<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>FileWrite (Interface.Interface.FileWrite)</title><link rel="stylesheet" href="../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Interface</a> &#x00BB; <a href="../index.html">Interface</a> &#x00BB; FileWrite</nav><header class="odoc-preamble"><h1>Module <code><span>Interface.FileWrite</span></code></h1><p>Representation of operations to manipulate JSON files</p><p>This module represents operations used to write into JSON files. Our JSON file represents our database, and in this file we revise their balances and add stocks to their portfolios, among other operations.</p><p>Note that certain functions that return a string return that string with two double quotes, such as &quot;&quot;x&quot;&quot; to correctly manipulate a JSON file. The specifications specify which functions return a string with two double quotes and one double quote.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value" id="val-file" class="anchored"><a href="#val-file" class="anchor"></a><code><span><span class="keyword">val</span> file : string</span></code></div><div class="spec-doc"><p>The JSON file that holds all information for accounts that are being edited.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-s" class="anchored"><a href="#type-s" class="anchor"></a><code><span><span class="keyword">type</span> s</span><span> = </span><span>{</span></code><table><tr id="type-s.name" class="anchored"><td class="def record field"><a href="#type-s.name" class="anchor"></a><code><span>name : string;</span></code></td></tr><tr id="type-s.price" class="anchored"><td class="def record field"><a href="#type-s.price" class="anchor"></a><code><span>price : string;</span></code></td></tr><tr id="type-s.shares" class="anchored"><td class="def record field"><a href="#type-s.shares" class="anchor"></a><code><span>shares : string;</span></code></td></tr><tr id="type-s.dateInvested" class="anchored"><td class="def record field"><a href="#type-s.dateInvested" class="anchor"></a><code><span>dateInvested : string;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>The type representing a stock.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-a" class="anchored"><a href="#type-a" class="anchor"></a><code><span><span class="keyword">type</span> a</span><span> = </span><span>{</span></code><table><tr id="type-a.username" class="anchored"><td class="def record field"><a href="#type-a.username" class="anchor"></a><code><span>username : string;</span></code></td></tr><tr id="type-a.password" class="anchored"><td class="def record field"><a href="#type-a.password" class="anchor"></a><code><span>password : string;</span></code></td></tr><tr id="type-a.balance" class="anchored"><td class="def record field"><a href="#type-a.balance" class="anchor"></a><code><span>balance : string;</span></code></td></tr><tr id="type-a.investedStocks" class="anchored"><td class="def record field"><a href="#type-a.investedStocks" class="anchor"></a><code><span>investedStocks : <span><a href="#type-s">s</a> list</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>The type representing an account in the database.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span><a href="#type-a">a</a> list</span></span></code></div><div class="spec-doc"><p>The type of values representing all accounts.</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-NegativeBalance" class="anchored"><a href="#exception-NegativeBalance" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">NegativeBalance</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>Raised when a user's balance is exceeded. This would occur when a user tries to invest more money in a stock than they do in their balance.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_quotes" class="anchored"><a href="#val-add_quotes" class="anchor"></a><code><span><span class="keyword">val</span> add_quotes : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>add_quotes s</code> adds quotes to both sides of <code>s</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-trim_quotes" class="anchored"><a href="#val-trim_quotes" class="anchor"></a><code><span><span class="keyword">val</span> trim_quotes : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>trim_quotes s</code> takes in a string <code>s</code> and then trims the first and last character and returns the new string.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_time" class="anchored"><a href="#val-get_time" class="anchor"></a><code><span><span class="keyword">val</span> get_time : <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Unix</span>.tm</span></code></div><div class="spec-doc"><p><code>get_time ()</code> is the current time as type <code>Unix.tm</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-time_to_string" class="anchored"><a href="#val-time_to_string" class="anchor"></a><code><span><span class="keyword">val</span> time_to_string : <span><span class="xref-unresolved">Unix</span>.tm <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>time_to_string tm</code> is the string format mm/dd/yyyy of <code>tm</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_account" class="anchored"><a href="#val-get_account" class="anchor"></a><code><span><span class="keyword">val</span> get_account : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-a">a</a></span></code></div><div class="spec-doc"><p><code>get_account u p t</code> returns the account of type a which has username <code>u</code> and password <code>p</code> from all accounts <code>t</code>. Raises <code>Not_found</code> if there's no account in <code>t</code> with username <code>u</code> and password <code>p</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-delete_account" class="anchored"><a href="#val-delete_account" class="anchor"></a><code><span><span class="keyword">val</span> delete_account : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>delete_account u p t</code> deletes account with associated username <code>u</code> and password <code>p</code> from all accounts <code>t</code>. If no account found with that username and password, all accounts will be returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-money_of_str" class="anchored"><a href="#val-money_of_str" class="anchor"></a><code><span><span class="keyword">val</span> money_of_str : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>money_of_str str</code> converts str, which contains a float in string form, to form <code>xxxx.xx</code> to avoid float rounding operations. The outputted string is with one double quote. If it throws an exception, then output is &quot;Exceeded API Key&quot;, if the person overuses their 8 api requests/minute with their api key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-update_balance" class="anchored"><a href="#val-update_balance" class="anchor"></a><code><span><span class="keyword">val</span> update_balance : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>update_balance b p</code> subtracts the float within price <code>p</code> from the float within balance <code>b</code> and returns the string version of the new balance. Note that this function doesn't return two double quotes for the output string. Raises <code>NegativeBalance s</code> if the updated balance is negative.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-accounts_to_string" class="anchored"><a href="#val-accounts_to_string" class="anchor"></a><code><span><span class="keyword">val</span> accounts_to_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>accounts_to_string a</code> returns full json file to be reprinted.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-check_stock" class="anchored"><a href="#val-check_stock" class="anchor"></a><code><span><span class="keyword">val</span> check_stock : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-s">s</a> option</span></span></code></div><div class="spec-doc"><p><code>check_stock u p t stock</code> checks if stock ticker string <code>stock</code> is in user's <code>u</code> portfolio and returns <code>Some stock</code>, where <code>stock</code> will contain price bought, shares, and date invested, if it is and <code>None</code> if it is not.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_share" class="anchored"><a href="#val-add_share" class="anchor"></a><code><span><span class="keyword">val</span> add_share : <span><a href="#type-s">s</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-s">s</a></span></code></div><div class="spec-doc"><p><code>add_share s</code> adds a share to stock <code>s</code> and returns the new stock.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-edit_accounts" class="anchored"><a href="#val-edit_accounts" class="anchor"></a><code><span><span class="keyword">val</span> edit_accounts : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-a">a</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>edit_accouts u p t stock price shares</code> adds stock <code>stock</code> to the user <code>user</code> at price <code>price</code> and returns a list of accounts.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sell_share" class="anchored"><a href="#val-sell_share" class="anchor"></a><code><span><span class="keyword">val</span> sell_share : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-s">s</a> list</span></span></code></div><div class="spec-doc"><p><code>sell_share u p t stock</code> sells one share of stock <code>stock</code> that is invested under the account associated with user <code>u</code> and password <code>p</code> within accounts <code>t</code>. If there is only one share remaining it deletes then stock from the list if not then it subtracts one.</p></div></div></div></body></html>